# ansible-role-sandbox-logging-forward

This repository contains an Ansible role responsible for configuring local log forwarding from individual sandbox hosts to a designated remote log aggregation system. This role is a fundamental part of the CyberRangeCZ platform's logging infrastructure, ensuring that all relevant events and activities within a training sandbox are centralized for comprehensive monitoring, analysis, and post-exercise review.

## Key Features:

*   **Log Forwarding**: Configures the target host to forward its local logs (e.g., system logs, application logs, or logs generated by other `sandbox-logging` sub-roles) to a specified remote destination.
*   **Flexible Transport Protocols**: Supports forwarding over TCP, TLS (for encrypted communication), and UDP, allowing administrators to choose the appropriate security and reliability level.
*   **Environment-Specific Configuration**: Adapts its mandatory parameters based on whether the sandbox is running in a "cloud" or "local" environment, using distinct identifiers (`slf_sandbox_id`, `slf_pool_id` for cloud; `slf_user_id`, `slf_access_token` for local).
*   **Customizable Filtering**: Offers the ability to filter forwarded logs based on severity (`slf_forward_log_severity`) and Syslog tags (`slf_tag_regexes`), with default tags including `bash.command` and `msf.command`, indicating integration with other logging roles.
*   **Encrypted Communication (TLS)**: Supports secure log transmission using TLS, including optional mutual authentication by providing paths to CA certificates, client certificates, and private keys.
*   **Requires Root Access**: Elevated privileges (`become: yes`) are necessary to configure system-level logging daemons.

## Importance in CyberRangeCZ:

This role is vital for several reasons:

*   **Centralized Visibility**: Consolidates logs from potentially many sandbox instances into a central system, providing a holistic view of events across the entire training environment.
*   **Monitoring and Alerting**: Enables real-time monitoring and alerting based on collected log data, allowing trainers to track ongoing exercises and respond to critical events.
*   **Post-Exercise Analysis**: Facilitates in-depth analysis of trainee actions, system behaviors, and security incidents after an exercise, contributing to effective debriefing and learning.
*   **Audit Trails**: Creates a robust audit trail of activities for compliance and accountability within the training platform.

The role also emphasizes the importance of time synchronization, recommending the use of the `ansible-role-chrony` to ensure accurate timestamps in forwarded logs.
